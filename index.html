<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Biblioteca de Prompts ‚Äì Contador 4.0</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <div class="card">
      <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px">
        <div>
          <div class="title">Biblioteca de Prompts ‚Äì Contador 4.0</div>
          <div class="subtitle">Tu colecci√≥n personal de prompts (guardar, editar, exportar)</div>
        </div>
        <div style="flex:1"></div>
        <div class="controls" role="toolbar" aria-label="Controles">
          <button id="exportTopBtn" class="btn btn-primary" title="Exportar a Excel (.xlsx)">Exportar a Excel</button>
          <button id="clearAllBtn" class="btn btn-ghost" title="Limpiar biblioteca">üóëÔ∏è Limpiar Biblioteca</button>
        </div>
      </div>

      <div class="tabs" role="tablist" aria-label="Pesta√±as">
        <div class="tab active" data-target="biblioteca">Biblioteca</div>
        <div class="tab" data-target="casos">Casos de √âxito</div>
        <div class="tab" data-target="recursos">Recursos</div>
      </div>

      <div id="biblioteca" class="card" style="margin-top:12px">
        <div class="muted">Haz clic en el nombre del prompt para abrir su ficha. Los ejemplos pre-cargados est√°n marcados.</div>
        <div class="table-wrapper" style="margin-top:12px">
          <table id="promptsTable" aria-describedby="desc">
            <thead>
              <tr><th style="width:4%">#</th><th style="width:14%">Categor√≠a</th><th style="width:18%">Nombre</th><th style="width:16%">Cu√°ndo Usar</th><th style="width:16%">Personalizaci√≥n</th><th style="width:6%">Tiempo</th><th style="width:8%">Frecuencia</th><th style="width:16%">Acciones</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

      <div id="casos" class="card" style="margin-top:12px; display:none">
        <h3>Casos de √âxito</h3>
        <ul class="muted">
          <li><strong>An√°lisis Express Rentabilidad PYME:</strong> Detect√≥ problema de capital de trabajo; ahorro estimado: $15M.</li>
          <li><strong>Propuesta Premium de Servicios Contables:</strong> 3 upgrades cerrados, +40% honorarios.</li>
          <li><strong>Calendario Fiscal Automatizado:</strong> Evit√≥ 2 multas por vencimientos.</li>
          <li><strong>Detecci√≥n de Irregularidades en N√≥mina:</strong> Empleado duplicado detectado; ahorro $3.2M/a√±o.</li>
        </ul>
      </div>

      <div id="recursos" class="card" style="margin-top:12px; display:none">
        <h3>Recursos & Descargas</h3>
        <div style="display:flex;gap:12px;flex-wrap:wrap;">
          <a class="btn btn-ghost" href="https://docs.google.com/spreadsheets/d/1LKITDhmh2EKybf9vfVgwIrxiUxmOpBKM/edit?usp=sharing" target="_blank" rel="noopener">Abrir Plantilla en Google Sheets</a>
        </div>
        <p class="muted" style="margin-top:8px">Utiliza la plantilla para respaldos o importaci√≥n masiva.</p>
      </div>

    </div>

    <div id="detailPanel" class="card" style="margin-top:18px; display:none">
      <div style="display:flex; justify-content:space-between; gap:12px; align-items:center; flex-wrap:wrap">
        <div>
          <div class="title" id="d-name">T√≠tulo</div>
          <div class="muted" id="d-sub">Sub</div>
        </div>
        <div style="display:flex;gap:8px;align-items:center">
          <button id="backBtn" class="icon-btn" title="Volver">Volver</button>
        </div>
      </div>

      <div style="margin-top:12px">
        <div style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:10px">
          <div><strong>Categor√≠a</strong><div class="muted" id="d-categoria"></div></div>
        </div>

        <div>
          <strong>Contenido del Prompt</strong>
          <div class="box-code" id="d-contenido" tabindex="0" aria-label="Contenido completo del prompt"></div>
        </div>
      </div>
    </div>

  </div>

  <button id="fab" class="fab" aria-label="Agregar prompt"><svg viewBox="0 0 24 24" fill="none" width="28" height="28"><path d="M12 5v14M5 12h14" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></button>

  <div id="modal" style="display:none;position:fixed;inset:0;align-items:center;justify-content:center;background:rgba(2,43,69,0.4);z-index:80;padding:20px;">
    <div style="max-width:880px;width:100%;background:var(--card);border-radius:12px;padding:18px;box-shadow:0 16px 40px rgba(2,43,69,0.18);">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div><strong style="font-size:18px;color:var(--accent-blue)">Agregar nuevo prompt</strong><div class="muted">Completa la ficha con el prompt real que usar√°s.</div></div>
        <button id="closeModal" class="icon-btn" title="Cerrar">‚úñ</button>
      </div>

      <form id="modalForm" style="margin-top:12px">
        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <div style="flex:1;min-width:240px"><label><strong>Nombre</strong></label><input id="m-nombre" type="text" required style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef6"/></div>
          <div style="width:140px"><label><strong>Tiempo (min)</strong></label><input id="m-tiempo" type="number" min="1" value="20" style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef6"/></div>
        </div>

        <div style="display:flex;gap:12px;flex-wrap:wrap;margin-top:8px">
          <div style="flex:1 1 60%"><label><strong>Cu√°ndo Usar</strong></label><textarea id="m-cuando" required style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef6;min-height:80px"></textarea></div>
          <div style="flex:1 1 38%">
            <label><strong>Categor√≠a</strong></label>
            <select id="m-categoria" style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef6">
              <option value="finanzas">Finanzas</option>
              <option value="clientes">Clientes</option>
              <option value="automatizacion">Automatizaci√≥n</option>
              <option value="n√≥mina">N√≥mina</option>
              <option value="otros" selected>Otros</option>
            </select>
            <label style="margin-top:10px"><strong>Frecuencia</strong></label>
            <select id="m-frecuencia" style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef6">
              <option value="diario">Diario</option><option value="semanal" selected>Semanal</option><option value="mensual">Mensual</option><option value="trimestral">Trimestral</option><option value="ocasional">Ocasional</option>
            </select>
            <label style="margin-top:10px"><strong>Personalizaci√≥n</strong></label>
            <textarea id="m-personalizacion" style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef6;min-height:64px"></textarea>
          </div>
        </div>

        <div style="margin-top:8px">
          <label><strong>Ejemplo de Uso</strong></label>
          <textarea id="m-ejemplo" required style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef6;min-height:80px"></textarea>
        </div>

        <div style="margin-top:8px">
          <label><strong>Contenido del Prompt</strong></label>
          <textarea id="m-contenido" required style="width:100%;padding:12px;border-radius:8px;border:1px solid #e6eef6;min-height:200px;font-family:ui-monospace,monospace"></textarea>
        </div>

        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
          <button type="button" id="cancelModal" class="btn btn-ghost">Cancelar</button>
          <button type="submit" class="btn btn-primary">Guardar Prompt</button>
        </div>
      </form>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
